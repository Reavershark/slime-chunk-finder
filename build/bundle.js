var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}function l(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function p(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t){return""===t?null:+t}function $(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}let x;function b(t){x=t}const y=[],w=[],k=[],_=[],A=Promise.resolve();let z=!1;function E(t){k.push(t)}function M(t){_.push(t)}let q=!1;const C=new Set;function T(){if(!q){q=!0;do{for(let t=0;t<y.length;t+=1){const e=y[t];b(e),L(e.$$)}for(b(null),y.length=0;w.length;)w.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];C.has(e)||(C.add(e),e())}k.length=0}while(y.length);for(;_.length;)_.pop()();z=!1,q=!1,C.clear()}}function L(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const P=new Set;function S(t,e){t&&t.i&&(P.delete(t),t.i(e))}function H(t,e,n,r){if(t&&t.o){if(P.has(t))return;P.add(t),undefined.c.push((()=>{P.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}function j(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function N(t){t&&t.c()}function O(t,n,s,c){const{fragment:l,on_mount:u,on_destroy:i,after_update:f}=t.$$;l&&l.m(n,s),c||E((()=>{const n=u.map(e).filter(o);i?i.push(...n):r(n),t.$$.on_mount=[]})),f.forEach(E)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(y.push(t),z||(z=!0,A.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,s,c,l,u,f=[-1]){const a=x;b(e);const d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:o.context||[]),callbacks:n(),dirty:f,skip_bound:!1};let h=!1;if(d.ctx=s?s(e,o.props||{},((t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&l(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&W(e,t)),n})):[],d.update(),h=!0,r(d.before_update),d.fragment=!!c&&c(d.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);d.fragment&&d.fragment.l(t),t.forEach(i)}else d.fragment&&d.fragment.c();o.intro&&S(e.$$.fragment),O(e,o.target,o.anchor,o.customElement),T()}b(a)}class F{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function I(e){let n,o,s,c,f,d,$,x,b,y,w,k,_,A,z;return{c(){n=a("div"),o=a("table"),s=a("tr"),c=a("td"),c.innerHTML="<p>World seed:</p>",f=h(),d=a("td"),$=a("input"),x=h(),b=a("tr"),y=a("td"),y.innerHTML="<p>Search radius:</p>",w=h(),k=a("td"),_=a("input"),m(c,"class","svelte-vie2xh"),m($,"type","number"),m(d,"class","svelte-vie2xh"),m(y,"class","svelte-vie2xh"),m(_,"type","number"),m(_,"min","0"),m(k,"class","svelte-vie2xh")},m(t,r){u(t,n,r),l(n,o),l(o,s),l(s,c),l(s,f),l(s,d),l(d,$),v($,e[0]),l(o,x),l(o,b),l(b,y),l(b,w),l(b,k),l(k,_),v(_,e[1]),A||(z=[p($,"input",e[2]),p(_,"input",e[3])],A=!0)},p(t,[e]){1&e&&g($.value)!==t[0]&&v($,t[0]),2&e&&g(_.value)!==t[1]&&v(_,t[1])},i:t,o:t,d(t){t&&i(n),A=!1,r(z)}}}function X(t,e,n){let{seed:r=0}=e,{radius:o=1e3}=e;return t.$$set=t=>{"seed"in t&&n(0,r=t.seed),"radius"in t&&n(1,o=t.radius)},[r,o,function(){r=g(this.value),n(0,r)},function(){o=g(this.value),n(1,o)}]}class Z extends F{constructor(t){super(),D(this,t,X,I,s,{seed:0,radius:1})}}function G(t,e,n){const r=t.slice();return r[4]=e[n],r[6]=n,r}function J(t,e,n){const r=t.slice();return r[4]=e[n],r[8]=n,r}function K(t){let e,n,r,o;function s(...e){return t[3](t[6],t[8],...e)}return{c(){e=a("div"),m(e,"class",n=c(t[0]&&t[1](t[6],t[8])?"checkbox filled":"checkbox")+" svelte-1r9lk9c")},m(t,n){u(t,e,n),r||(o=p(e,"click",s),r=!0)},p(r,o){t=r,1&o&&n!==(n=c(t[0]&&t[1](t[6],t[8])?"checkbox filled":"checkbox")+" svelte-1r9lk9c")&&m(e,"class",n)},d(t){t&&i(e),r=!1,o()}}}function Q(e){let n;return{c(){n=d(e[6])},m(t,e){u(t,n,e)},p:t,d(t){t&&i(n)}}}function R(e){let n;return{c(){n=d(e[8])},m(t,e){u(t,n,e)},p:t,d(t){t&&i(n)}}}function U(t){let e;let n=function(t,e){return 0===t[6]?R:0===t[8]?Q:K}(t)(t);return{c(){e=a("td"),n.c(),m(e,"class","svelte-1r9lk9c")},m(t,r){u(t,e,r),n.m(e,null)},p(t,e){n.p(t,e)},d(t){t&&i(e),n.d()}}}function V(t){let e,n,r=Array(tt+1),o=[];for(let e=0;e<r.length;e+=1)o[e]=U(J(t,r,e));return{c(){e=a("tr");for(let t=0;t<o.length;t+=1)o[t].c();n=h()},m(t,r){u(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);l(e,n)},p(t,s){if(7&s){let c;for(r=Array(tt+1),c=0;c<r.length;c+=1){const l=J(t,r,c);o[c]?o[c].p(l,s):(o[c]=U(l),o[c].c(),o[c].m(e,n))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},d(t){t&&i(e),f(o,t)}}}function Y(e){let n,r,o,s=Array(tt+1),c=[];for(let t=0;t<s.length;t+=1)c[t]=V(G(e,s,t));return{c(){n=a("div"),r=a("table"),o=a("tr");for(let t=0;t<c.length;t+=1)c[t].c()},m(t,e){u(t,n,e),l(n,r),l(r,o);for(let t=0;t<c.length;t+=1)c[t].m(o,null)},p(t,[e]){if(7&e){let n;for(s=Array(tt+1),n=0;n<s.length;n+=1){const r=G(t,s,n);c[n]?c[n].p(r,e):(c[n]=V(r),c[n].c(),c[n].m(o,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=s.length}},i:t,o:t,d(t){t&&i(n),f(c,t)}}}let tt=5;function et(t,e,n){const r=[{w:3,h:2},{w:2,h:3},{w:3,h:3}],o=(t,e)=>{for(let o=0;o<r.length;o++){const s=r[o];if(s.w===t&&s.h===e)return r.splice(o,1),void n(0,r)}r.push({w:t,h:e}),n(0,r)};return[r,(t,e)=>{for(const n of r)if(n.w===t&&n.h===e)return!0;return!1},o,(t,e,n)=>o(t,e)]}class nt extends F{constructor(t){super(),D(this,t,et,Y,s,{patterns:0})}get patterns(){return this.$$.ctx[0]}}function rt(t,e,n){const r=t.slice();return r[1]=e[n],r}function ot(t){let e,n,r,o,s,c,f,p,g,v,x,b,y=t[1].x+"",w=t[1].z+"",k=t[1].w+"",_=t[1].h+"";return{c(){e=a("tr"),n=a("td"),r=d(y),o=h(),s=a("td"),c=d(w),f=h(),p=a("td"),g=d(k),v=d("x"),x=d(_),b=h(),m(n,"class","svelte-1mz44qn"),m(s,"class","svelte-1mz44qn"),m(p,"class","svelte-1mz44qn")},m(t,i){u(t,e,i),l(e,n),l(n,r),l(e,o),l(e,s),l(s,c),l(e,f),l(e,p),l(p,g),l(p,v),l(p,x),l(e,b)},p(t,e){1&e&&y!==(y=t[1].x+"")&&$(r,y),1&e&&w!==(w=t[1].z+"")&&$(c,w),1&e&&k!==(k=t[1].w+"")&&$(g,k),1&e&&_!==(_=t[1].h+"")&&$(x,_)},d(t){t&&i(e)}}}function st(e){let n,r,o,s,c=e[0],d=[];for(let t=0;t<c.length;t+=1)d[t]=ot(rt(e,c,t));return{c(){n=a("div"),r=a("table"),o=a("thead"),o.innerHTML='<td class="svelte-1mz44qn">X</td> \n      <td class="svelte-1mz44qn">Z</td> \n      <td class="svelte-1mz44qn">Dimensions</td>',s=h();for(let t=0;t<d.length;t+=1)d[t].c()},m(t,e){u(t,n,e),l(n,r),l(r,o),l(r,s);for(let t=0;t<d.length;t+=1)d[t].m(r,null)},p(t,[e]){if(1&e){let n;for(c=t[0],n=0;n<c.length;n+=1){const o=rt(t,c,n);d[n]?d[n].p(o,e):(d[n]=ot(o),d[n].c(),d[n].m(r,null))}for(;n<d.length;n+=1)d[n].d(1);d.length=c.length}},i:t,o:t,d(t){t&&i(n),f(d,t)}}}function ct(t,e,n){let{results:r=[]}=e;return t.$$set=t=>{"results"in t&&n(0,r=t.results)},[r]}class lt extends F{constructor(t){super(),D(this,t,ct,st,s,{results:0})}}function ut(t){let e,n,r,o,s,c,f,g,v,x,b,y,k,_,A,z,E,q,C,T,L,P,W,D;function F(e){t[6](e)}let I={};function X(e){t[7](e)}function G(e){t[8](e)}void 0!==t[0]&&(I.patterns=t[0]),o=new nt({props:I}),w.push((()=>j(o,"patterns",F)));let J={};function K(e){t[9](e)}void 0!==t[2]&&(J.seed=t[2]),void 0!==t[1]&&(J.radius=t[1]),g=new Z({props:J}),w.push((()=>j(g,"seed",X))),w.push((()=>j(g,"radius",G)));let Q={};return void 0!==t[3]&&(Q.results=t[3]),T=new lt({props:Q}),w.push((()=>j(T,"results",K))),{c(){e=a("div"),n=a("div"),r=a("div"),N(o.$$.fragment),c=h(),f=a("div"),N(g.$$.fragment),b=h(),y=a("p"),k=a("button"),k.textContent="Find chunks",_=d("\n        Progress: "),A=d(t[4]),z=d("%"),E=h(),q=a("div"),C=a("div"),N(T.$$.fragment),m(r,"class","box svelte-1o1c0cd"),m(f,"class","box svelte-1o1c0cd"),m(n,"class","column svelte-1o1c0cd"),m(C,"class","box svelte-1o1c0cd"),m(q,"class","column svelte-1o1c0cd"),m(e,"class","outer svelte-1o1c0cd")},m(s,i){u(s,e,i),l(e,n),l(n,r),O(o,r,null),l(n,c),l(n,f),O(g,f,null),l(f,b),l(f,y),l(y,k),l(y,_),l(y,A),l(y,z),l(e,E),l(e,q),l(q,C),O(T,C,null),P=!0,W||(D=p(k,"click",t[5]),W=!0)},p(t,[e]){const n={};!s&&1&e&&(s=!0,n.patterns=t[0],M((()=>s=!1))),o.$set(n);const r={};!v&&4&e&&(v=!0,r.seed=t[2],M((()=>v=!1))),!x&&2&e&&(x=!0,r.radius=t[1],M((()=>x=!1))),g.$set(r),(!P||16&e)&&$(A,t[4]);const c={};!L&&8&e&&(L=!0,c.results=t[3],M((()=>L=!1))),T.$set(c)},i(t){P||(S(o.$$.fragment,t),S(g.$$.fragment,t),S(T.$$.fragment,t),P=!0)},o(t){H(o.$$.fragment,t),H(g.$$.fragment,t),H(T.$$.fragment,t),P=!1},d(t){t&&i(e),B(o),B(g),B(T),W=!1,D()}}}function it(t,e,n){let r,o,s,c,l=0;const u=(t,e,r,o)=>{c.push({x:t,z:e,w:r,h:o}),n(3,c)},i=t=>{n(4,l=t),console.log(t)};return[r,o,s,c,l,()=>{n(3,c=[]),n(4,l=0),async function(t,e,n,r,o){t=BigInt(t),e=Math.floor(e);const s={env:{foundPatternCallback:r,progressCallback:o}},{instance:c}=await WebAssembly.instantiateStreaming(fetch("wasm.wasm"),s);console.log(c),c.exports.memory.grow(1+2*n.length*4/65536),c.exports.createPatternArray(n.length);for(let t=0;t<n.length;t++){let e=Math.floor(n[t].w),r=Math.floor(n[t].h);c.exports.setPattern(t,e,r)}let l=c.exports.findMaxHeight();c.exports.memory.grow(1+2*e*l/65536);for(const n of Array(101))setTimeout((async()=>c.exports.findSlimeChunks(t,e)),1)}(s,o,r,u,i)},function(t){r=t,n(0,r)},function(t){s=t,n(2,s)},function(t){o=t,n(1,o)},function(t){c=t,n(3,c)}]}return new class extends F{constructor(t){super(),D(this,t,it,ut,s,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
